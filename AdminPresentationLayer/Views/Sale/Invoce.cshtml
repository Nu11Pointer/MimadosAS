@model EntityLayer.Sale

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Factura: @Html.DisplayFor(s => s.Id)</title>
    <link rel="stylesheet" href="~/Content/invoce.css">
</head>

<body>

    <div id="print" style="padding-top: 15px; padding-top: 15px">
        <center>
            <button type="button" id="Imprimir" class="btn btn-secondary" onclick="imprSelec()"><i class="fas fa-print"></i> Imprimir</button>
        </center>
        <br>
    </div>

    <div class="invoice-box" id="invoice">
        <table cellpadding="0" cellspacing="0">
            <tr class="top">
                <td colspan="2">
                    <table>
                        <tr>
                            <td class="title">
                                Mimados
                            </td>

                            <td id="Arigth">
                                Factura: #@Html.DisplayFor(s => s.Id)<br />
                                Fecha: @Html.DisplayFor(s => s.TimeStamp)
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

            <tr class="information">
                <td colspan="2">
                    <table>
                        <tr>
                            <td style="width:50%">
                                <b>@Html.DisplayFor(s => s.Employee.BranchOffice.Name)<br /></b>
                                @if (Model.Employee.BranchOffice.Phones.Count == 1)
                                {
                                    @Html.DisplayFor(s => s.Employee.BranchOffice.Phones[0].PhoneNumber)
                                }
                                @if (Model.Employee.BranchOffice.Phones.Count >= 2)
                                {
                                    @Html.DisplayFor(s => s.Employee.BranchOffice.Phones[0].PhoneNumber)
                                    @Html.Label(" / ")
                                    @Html.DisplayFor(s => s.Employee.BranchOffice.Phones[1].PhoneNumber)
                                }
                                @Html.DisplayFor(s => s.Employee.BranchOffice.Address)<br />
                                Atendido por: <br />
                                @Html.DisplayFor(s => s.Employee.Name) @Html.DisplayFor(s => s.Employee.SurName)
                            </td>

                            <td id="Arigth" style="width:50%">
                                Nombre: @Html.DisplayFor(s => s.Customer.Name) @Html.DisplayFor(s => s.Customer.SurName)<br />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>

        </table>

        <table cellpadding="0" cellspacing="0">

            <tr class="heading">

                <td>Cantidad</td>
                <td width="45%">Producto</td>
                <td>Precio Unitario</td>
                <td id="Arigth">Total</td>

            </tr>

            @{
                foreach (var item in Model.SaleDetails)
                {
                    @: <tr class="details">
                        <td>@Html.DisplayFor(modelItem => item.Quantity)<br /></td>
                        <td>@Html.DisplayFor(modelItem => item.Product.Name)<br /></td>
                        <td>@Html.DisplayFor(modelItem => item.StringSalePrice)<br /></td>
                        <td id="Arigth">@Html.DisplayFor(modelItem => item.StringTotal)<br /></td>
                    }
            }


        <tr class="details">

            <td></td>
            <td></td>
            <td></td>
            <td id="Arigth">
                Subtotal: @Html.DisplayFor(s => s.StringSubTotal) <br />
                Impuesto: @Html.DisplayFor(s => s.StringTaxes) <br />
                <b>Total: @Html.DisplayFor(s => s.StringTotal)</b> <br />
                Cambio: @Html.DisplayFor(s => s.StringChange) <br />
            </td>
        </tr>

        </table>

    </div>

<footer>
    <p class="footer" id="Note">Precios incluyen impuesto de venta</p>
</footer>

<script>

    function imprSelec() {

        document.getElementById("print").hidden = true;
        window.print();
        document.getElementById("print").hidden = false;
    }

</script>
</body>
</html>